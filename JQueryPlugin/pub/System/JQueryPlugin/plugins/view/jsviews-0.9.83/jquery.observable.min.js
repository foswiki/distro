/*! JsObservable v0.9.83 (Beta): http://jsviews.com/#jsobservable */
!function(t,e){var n=e.jQuery;"object"==typeof exports?module.exports=n?t(e,n):function(n){return t(e,n)}:"function"==typeof define&&define.amd?define(["jquery"],function(n){return t(e,n)}):t(e,!1)}(function(t,e){"use strict";var n=e===!1;if(e=e||t.jQuery,!e||!e.fn)throw"JsObservable requires jQuery";var r,i,o="v0.9.83",s=e.views=e.views||n&&t.jsrender&&jsrender.views||{jsviews:o,sub:{settings:{}},settings:{advanced:function(t){return l=c.advanced=c.advanced||{_jsv:!0},t?("_jsv"in t&&(l._jsv=t._jsv),a.advSet(),s.settings):l}}},a=s.sub,c=a.settings,l=c.advanced,f=e.isFunction,u=e.expando,p=e.isArray,d="object";if(!e.observe){var h=e.event.special,v=[].slice,g=[].splice,_=[].concat,b=parseInt,y=/\S+/g,m=a.propChng=a.propChng||"propertyChange",I=a.arrChng=a.arrChng||"arrayChange",j={},A=m+".observe",w=1,x=1,F=1,P=e.hasData,S=e.data,C={},T=function(t){return t._cId=t._cId||".obs"+x++},k=function(t,e){return this._data=e,this._ns=t,this},O=function(t,e){return this._data=e,this._ns=t,this},V=function(t){return p(t)?[t]:t},D=function(t,e,n){t=t?p(t)?t:[t]:[];var r,i,o=e,s=o,a=t&&t.length,c=[];for(r=0;r<a;r++)i=t[r],f(i)?c=c.concat(D(i.call(e,e,n),e)):""+i===i?(s!==o&&c.push(o=s),c.push(i)):(e=s=i,s!==o&&c.push(o=s));return c},H=function(t,e){for(var n in t)return;delete j[e]},Q=function(t,e){function n(t){return typeof t===d&&(h[0]||u&&p(t))}if(!t.data||!t.data.off){var r,i,o,s=e.oldValue,a=e.value,c=t.data,l=c.observeAll,f=c.cb,u=!f.noArray,h=c.paths,v=c.ns;t.type===I?(f.array||f).call(c,t,e):c.prop!==e.path&&"*"!==c.prop||(l?(r=l._path+"."+e.path,i=l.filter,o=[t.target].concat(l.parents()),n(s)&&q(u,v,[s],h,f,!0,i,[o],r),n(a)&&q(u,v,[a],h,f,void 0,i,[o],r)):(n(s)&&q(u,v,[s],h,f,!0),n(a)&&q(u,v,[a],h,f)),c.cb(t,e))}},q=function(){var t=_.apply([],arguments);return r.apply(t.shift(),t)},M=function(t,e,n){J(this._ns,this._data,t,e,[],"root",n)},B=function(t,e){M.call(this,t,e,!0)},J=function(t,e,n,o,s,a,c,l){function f(t,e){for(g=t.length,b=a+"[]";g--;)h(t,g,e,1)}function h(e,r,s,a){var c,f;r!==u&&(c=i._fltr(b,e[r],y,o))&&(f=y.slice(),a&&m&&f[0]!==m&&f.unshift(m),J(t,c,n,o||(a?void 0:0),f,b,s,l))}function v(t,e){switch(a=t.data.observeAll._path,m=t.target,e.change){case"insert":f(e.items);break;case"remove":f(e.items,!0);break;case"set":b=a+"."+e.path,h(e,"oldValue",!0),h(e,"value")}m=void 0,n.apply(this,arguments)}var g,_,b,y,m,I,j=!l||l.un||!c;if(e&&typeof e===d){if(y=[e].concat(s),_=p(e)?"":"*",l&&j&&P(e)&&l[I=S(e).obId])return void l[I]++;if(l||(l={un:c}),n){if(_||0!==o)if(v._cId=T(n),j)r(t,e,_,v,c,o,y,a),I=S(e).obId,l[I]=(l[I]||0)+1;else{if(--l[S(e).obId])return;r(t,e,_,v,c,o,y,a)}}else l&&(l[S(e).obId]=1),r(t,e,_,void 0,c,o,y,a);if(_)for(g in e)b=a+"."+g,h(e,g,c);else f(e,c)}},z=function(t){return t.indexOf(".")<0&&t.indexOf("[")<0},E=function(){return[].push.call(arguments,!0),r.apply(this,arguments)};r=function(){function t(){function o(t,r,i,o){var s,a,c=P(st),l=V(st),f=Y,u=Z;if(t=n?t+"."+n:t,!M&&(o||i))for(K=c&&e._data(st),K=K&&K.events,K=K&&K[i?I:m],E=K&&K.length;E--;)if(G=K[E]&&K[E].data,G&&(o&&G.ns!==n||!o&&G.ns===n&&G.cb&&G.cb._cId===B._cId))return;M||o?e(l).off(t,Q):(a=i?{}:{fullPath:O,paths:r?[r]:[],prop:k},a.ns=n,a.cb=B,Z&&(a.observeAll={_path:u,path:function(){return s=f.length,u.replace(/[[.]/g,function(t){return s--,"["===t?"["+e.inArray(f[s-1],f[s]):"."})},parents:function(){return f},filter:$}),e(l).on(t,null,a,Q),U&&(U[S(st).obId||S(st,"obId",w++)]=st))}function c(e){var n=ot;return e.ob=L(e,n),e.cb=function(i,o){var s=e.ob,a=e.sb,c=L(e,n);c!==s&&(typeof s===d&&(l(s,!0),(a||r&&p(s))&&t([s],a,B,L,!0)),e.ob=c,typeof c===d&&(l(c),(a||r&&p(c))&&t([c],a,B,L))),B(i,o)}}function l(t,e,n,s){if(r){var a=st,c=Z;st=t,s&&(st=t[s],Z+="."+s),$&&st&&(st=i._fltr(Z,st,s?[t].concat(Y):Y,$)),st&&(n||p(st))&&o(I+".observe"+(B?T(B):""),void 0,!0,e),st=a,Z=c}}var h,b,x,C,k,O,q,M,B,J,z,E,G,K,L,N,R,U,W,X,Y,Z,$,tt,et,nt=A,rt=1!=this?_.apply([],arguments):v.call(arguments),it=rt.pop()||!1,ot=rt.shift(),st=ot,at=rt.length;if(it+""===it&&(Z=it,Y=rt.pop(),$=rt.pop(),it=!!rt.pop(),at-=3),it===!!it&&(M=it,it=rt[at-1],it=!at||it+""===it||it&&!f(it)?void 0:(at--,rt.pop()),M&&!at&&f(ot)&&(it=ot,ot=void 0)),B=it,at&&f(rt[at-1])&&(N=L=B,B=rt.pop(),at--),!M||!B||B._cId){for(nt+=B?(z=B._inId||"",M?B._cId+z:(J=T(B))+z):"",J&&!M&&(U=j[J]=j[J]||{}),tt=n&&n.match(y)||[""],et=tt.length;et--;){if(n=tt[et],ot&&(O=rt[0],!O||O+""!==O)&&(p(ot)?l(ot,M,!0):M&&o(nt,"")),M&&!at&&!ot)for(b in j){b=j[b];for(G in b)st=b[G],p(st)?l(st,M,M):o(nt,"")}for(W=0,h=0;h<at;h++)if(O=rt[h],""!==O){if(O&&O._cp&&(L=a._gccb(O[0]),s=ot=O[0].data,O=O[1]),st=ot,""+O===O){if(C=O.split("^"),C[1]&&(W=C[0].split(".").length,O=C.join("."),W=O.split(".").length-W),L&&(R=L(O,ot,W),L=N),R){at+=R.length-1,g.apply(rt,[h--,1].concat(R));continue}C=O.split(".")}else f(O)||(O&&O._jsv?(X=M?O.cb:c(O),X.noArray=!r,X._cId=B._cId,X._inId=X._inId||".obIn"+F++,(O.bnd||O.prm&&O.prm.length||!O.sb)&&t([st],O.path,[s],O.prm,X,L,M),O.sb&&t([O.ob],O.sb,B,L,M),O=s,st=void 0):st=O),C=[ot=O];for(;st&&void 0!==(k=C.shift());)if(typeof st===d){if(""+k===k){if(""===k)continue;if(C.length<W+1&&!st.nodeType){if(!M&&(K=P(st)&&e._data(st))){for(K=K.events,K=K&&K[m],E=K&&K.length,x=0;E--;)G=K[E].data,!G||G.ns!==n||G.cb._cId!==B._cId||G.cb._inId!==B._inId||G.prop!==k&&"*"!==G.prop&&"**"!==G.prop||((b=C.join("."))&&G.paths.push(b),x++);if(x){st=st[k];continue}}if("*"===k||"**"===k){if(!M&&K&&K.length&&o(nt,"",!1,!0),"*"===k){o(nt,"");for(b in st)b!==u&&l(st,M,void 0,b)}else e.observable(n,st)[(M?"un":"")+"observeAll"](B);break}k&&o(nt+".p_"+k,C.join("^"))}Z&&(Z+="."+k),k=st[k]}if(f(k)){(q=k.depends)&&t([st],D(q,st,B),B,L,M);break}st=k,M&&st===ot&&(h>at-2||rt[h+1]+""!==rt[h+1])&&o(nt,"")}l(st,M)}}return J&&H(U,J),{cbId:J,bnd:U,s:j}}}var n,r=0!=this,o=v.call(arguments),s=o[0];return s+""===s&&r&&(n=s,o.shift(),s=o[0]),t.apply(1,o)},i=function(t,e){return 1===arguments.length&&(e=t,t=""),p(e)?new O(t,e):new k(t,e)},a.getDeps=function(){var t=arguments;return function(){for(var e,n,r=[],i=t.length;i--;)e=t[i--],n=t[i],n&&(r=r.concat(f(n)?n(e,e):n));return r}},e.observable=i,i._fltr=function(t,e,n,r){if(!r||!f(r)||r(t,e,n))return e=f(e)?e.set&&e.call(n[0]):e,typeof e===d&&e},i.Object=k,i.Array=O,e.observe=i.observe=r,e.unobserve=i.unobserve=E,i._apply=q,k.prototype={_data:null,observeAll:M,unobserveAll:B,data:function(){return this._data},setProperty:function(t,e,n){t=t||"";var r,i,o,s=t+""!==t,a=this,c=a._data;if(c)if(s)if(n=e,p(t))for(r=t.length;r--;)i=t[r],a.setProperty(i.name,i.value,void 0===n||n);else for(r in t)a.setProperty(r,t[r],n);else if(t!==u){for(o=t.split(/[.^]/);c&&o.length>1;)c=c[o.shift()];c&&a._setProperty(c,o[0],e,n)}return a},removeProperty:function(t){return this.setProperty(t,C),this},_setProperty:function(t,e,n,r){var i,o,s,a=e?t[e]:t;f(a)&&a.set&&(t=t._wrp||t,o=a,i=o.set===!0?o:o.set,a=o.call(t)),(a!==n||r&&a!=n)&&(!(a instanceof Date)||a>n||a<n)&&(i?(i.call(t,n),n=o.call(t)):(s=n===C)?void 0!==a?(delete t[e],n=void 0):e=void 0:e&&(t[e]=n),e&&this._trigger(t,{change:"set",path:e,value:n,oldValue:a,remove:s}))},_trigger:function(t,n){e(t).triggerHandler(m+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),n)}},O.prototype={_data:null,observeAll:M,unobserveAll:B,data:function(){return this._data},insert:function(t,e){var n=this._data;return 1===arguments.length&&(e=t,t=n.length),t=b(t),t>-1&&(e=p(e)?e:[e],e.length&&this._insert(t,e)),this},_insert:function(t,e){var n=this._data,r=n.length;t>r&&(t=r),g.apply(n,[t,0].concat(e)),this._trigger({change:"insert",index:t,items:e},r)},remove:function(t,e){var n,r=this._data;return void 0===t&&(t=r.length-1),t=b(t),e=e?b(e):0===e?0:1,e>0&&t>-1&&(n=r.slice(t,t+e),(e=n.length)&&this._remove(t,e,n)),this},_remove:function(t,e,n){var r=this._data,i=r.length;r.splice(t,e),this._trigger({change:"remove",index:t,items:n},i)},move:function(t,e,n){return n=n?b(n):0===n?0:1,t=b(t),e=b(e),n>0&&t>-1&&e>-1&&t!==e&&this._move(t,e,n),this},_move:function(t,e,n){var r,i=this._data,o=i.length,s=t+n-o;s>0&&(n-=s),n&&(r=i.splice(t,n),e>i.length&&(e=i.length),g.apply(i,[e,0].concat(r)),this._trigger({change:"move",oldIndex:t,index:e,items:r},o))},refresh:function(t,e){function n(){o&&(c.insert(i-o,l),d+=o,r+=o,o=0,l=[])}var r,i,o,s,a,c=this,l=[],f=c._data,u=f.slice(),p=f.length,d=p,h=t.length;for(c._srt=!0,i=o=0;i<h;i++)if((s=t[i])===f[i-o])n();else{for(r=i-o;r<d&&s!==f[r];r++);if(r<d){for(n(),a=0;a++<h-r&&t[i+a]===f[r+a];);c.move(r,i,a),i+=a-1}else o++,l.push(s)}return n(),d>i&&c.remove(i,d-i),c._srt=void 0,c._trigger({change:"refresh",oldItems:u},p),c},_trigger:function(t,n){var r=this,i=r._data,o=i.length,s=e([i]);r._srt?t.refresh=!0:o!==n&&s.triggerHandler(m,{change:"set",path:"length",value:o,oldValue:n}),s.triggerHandler(I+(r._ns?"."+/^\S+/.exec(r._ns)[0]:""),t)}},h[m]=h[I]={remove:function(t){var n,r,i,o,s,a=t.data;if(a&&(a.off=!0,a=a.cb)&&(n=j[a._cId])){for(i=e._data(this).events[t.type],o=i.length;o--&&!r;)r=(s=i[o].data)&&s.cb&&s.cb._cId===a._cId;r||(delete n[S(this).obId],H(n,a._cId))}}},s.map=function(t){function n(e,n,r,o){var s,a=this;this.src&&this.unmap(),typeof e===d&&(a.src=e,a.tgt=r||a.tgt||[],a.options=n||a.options,a.update(),o||(t.obsSrc&&i(a.src).observeAll(a.obs=function(e,n){s||(s=!0,t.obsSrc(a,e,n),s=void 0)},a.srcFlt),t.obsTgt&&i(a.tgt).observeAll(a.obt=function(e,n){s||(s=!0,t.obsTgt(a,e,n),s=void 0)},a.tgtFlt)))}return f(t)&&(t={getTgt:t}),t.baseMap&&(t=e.extend({},t.baseMap,t)),t.map=function(t,e,r,i){return new n(t,e,r,i)},(n.prototype={srcFlt:t.srcFlt||z,tgtFlt:t.tgtFlt||z,update:function(e){var n=this;i(n.tgt).refresh(t.getTgt(n.src,n.options=e||n.options))},unmap:function(){var t=this;t.src&&(t.obs&&i(t.src).unobserveAll(t.obs,t.srcFlt),t.obt&&i(t.tgt).unobserveAll(t.obt,t.tgtFlt),t.src=void 0)},map:n,_def:t}).constructor=n,t},a.advSet=function(){a._gccb=this._gccb,t._jsv=c.advanced._jsv?{cbBindings:j}:void 0}}return e},window);
//# sourceMappingURL=jquery.observable.min.js.map
