/*! JsObservable v1.0.16: http://jsviews.com/#jsobservable */
!function(e,t){var n=t.jQuery;"object"==typeof exports?module.exports=n?e(t,n):function(n){return e(t,n)}:"function"==typeof define&&define.amd?define(["jquery"],(function(n){return e(t,n)})):e(t,!1)}((function(e,t){"use strict";var n=!1===t;if(!(t=t||e.jQuery)||!t.fn)throw"jquery.observable.js requires jQuery";var i,r,a="v1.0.16",o=t.views=t.views||n&&e.jsrender&&jsrender.views||{jsviews:a,sub:{settings:{}},settings:{advanced:function(e){return d=l.advanced=l.advanced||{_jsv:!0},e?("_jsv"in e&&(d._jsv=e._jsv),s.advSet(),o.settings):d}}},s=o.sub,l=s.settings,d=l.advanced,p=function(e){return"function"==typeof e},c=Array.isArray,f=t.expando,v="string",g="object";if(o.jsviews!==a)throw"jquery.observable.js requires jsrender.js "+a;if(!t.observe){var u=t.event.special,_=[].slice,h=[].splice,m=[].concat,b=parseInt,x=/\S+/g,y=/^[^.[]*$/,k=s.propChng=s.propChng||"propertyChange",C=s.arrChng=s.arrChng||"arrayChange",w={},j=k+".observe",E=1,A=1,I=1,T=t.data,V={},S=[],N=function(e){return e?e._cId=e._cId||".obs"+A++:""},P=function(e,t){return this._data=t,this._ns=e,this},L=function(e,t){return this._data=t,this._ns=e,this},B=function(e,t,n){var i,r,a,o,s=a=t,l=(e=e?c(e)?e:[e]:[])&&e.length,d=[];for(i=0;i<l;i++)r=e[i],p(r)?(o=t.tagName?t.linkCtx.data:t,d=d.concat(B(r.call(t,o,n),o,n))):typeof r===v?(s!==a&&d.push(a=s),d.push(r)):(t=s=r=void 0===r?null:r,s!==a&&d.push(a=s));return d.length&&(d.unshift({_ar:1}),d.push({_ar:-1})),d},q=function(e,t){function n(e){return typeof e===g&&(v[0]||!f&&c(e))}if(!e.data||!e.data.off){var i,r,a,o=t.oldValue,s=t.value,l=e.data,d=l.observeAll,p=l.cb,f=l._arOk?0:1,v=l.paths,u=l.ns;e.type===C?(p.array||p).call(l,e,t):l.prop!==t.path&&"*"!==l.prop||(d?(i=d._path+"."+t.path,r=d.filter,a=[e.target].concat(d.parents()),n(o)&&D(void 0,u,[o],v,p,!0,r,[a],i),n(s)&&D(void 0,u,[s],v,p,void 0,r,[a],i)):(n(o)&&D(f,u,[o],v,p,!0),n(s)&&D(f,u,[s],v,p)),l.cb(e,t))}},D=function(){var e=m.apply([],arguments);return i.apply(e.shift(),e)},U=function(e,t,n){O(this._ns,this._data,e,t,[],"root",n)},F=function(e,t){U.call(this,e,t,!0)},O=function(e,n,a,o,s,l,d,p){function v(e,t){for(h=e.length,b=l+"[]";h--;)u(e,h,t,1)}function u(t,n,i,s){var l,d;n!==f&&(l=r._fltr(b,t[n],x,o))&&(d=x.slice(),s&&y&&d[0]!==y&&d.unshift(y),O(e,l,a,o||(s?void 0:0),d,b,i,p))}function _(e,t){switch(l=e.data.observeAll._path,y=e.target,t.change){case"insert":v(t.items);break;case"remove":v(t.items,!0);break;case"set":b=l+"."+t.path,u(t,"oldValue",!0),u(t,"value")}y=void 0,a.apply(this,arguments)}_._wrp=1;var h,m,b,x,y,k,C=!p||p.un||!d;if(n&&typeof n===g){if(x=[n].concat(s),m=c(n)?"":"*",p&&C&&t.hasData(n)&&p[k=T(n).obId])return void p[k]++;if(p||(p={un:d}),a){if(m||0!==o)if(_._cId=N(a),C)i(e,n,m,_,d,o,x,l),k=T(n).obId,p[k]=(p[k]||0)+1;else{if(--p[T(n).obId])return;i(e,n,m,_,d,o,x,l)}}else p&&(p[T(n).obId]=1),i(e,n,m,void 0,d,o,x,l);if(m)for(h in n)b=l+"."+h,u(n,h,d);else v(n,d)}},M=function(e){return y.test(e)},$=function(){return[].push.call(arguments,!0),i.apply(void 0,arguments)},R=function(e){var t,n=this.slice();for(this.length=0,this._go=0;t=n.shift();)t.skip||t[0]._trigger(t[1],t[2],!0);this.paths={}};i=function(){var e,n=1==this?0:1,a=_.call(arguments),o=a[0];return typeof o===v&&(e=o,a.shift()),function a(){var o,l,d,u,h,b,y,A,V,S,P,L,D,U,F,O,M,$,R,H;function K(e,t){var n;for(y in t)n=t[y],c(n)?z(e,n,d,d):Q(e,n,void 0,X,"")}function Q(i,r,a,o,s,l,p){var f,v,g,u=function(e){return c(e)?[e]:e}(r),_=L,h=D;if(o=e?o+"."+e:o,!d&&(p||l))for(R=(R=t._data(r).events)&&R[l?C:k],H=R&&R.length;H--;)if((y=R[H]&&R[H].data)&&(p&&y.ns!==e||!p&&y.ns===e&&y.cb&&y.cb._cId===i._cId&&y.cb._inId===i._inId&&(!i._wrp||y.cb._wrp)))return;d||p?t(u).off(o,q):((v=l?{}:{fullPath:a,paths:s?[s]:[],prop:$,_arOk:n}).ns=e,v.cb=i,D&&(v.observeAll={_path:h,path:function(){return f=_.length,h.replace(/[[.]/g,(function(e){return f--,"["===e?"["+t.inArray(_[f-1],_[f]):"."}))},parents:function(){return _},filter:U}),t(u).on(o,null,v,q),S&&(g=(g=T(r)).obId||(g.obId=E++),S[g]=S[g]||(S.len++,r)))}function z(e,t,i,a,o){if(n){var s,l=D;s=t,o&&(s=t[o],D=D?D+"."+o:D),(a||c(s))&&(U&&s&&(s=r._fltr(D,s,L,U)),s&&Q(e,s,void 0,C+".observe"+N(e),void 0,!0,i)),D=l}}function W(r){function o(r,u,_,h){function b(e){return e.ob=h(e),e.cb=function(t,i){var r=e.ob,o=e.sb,s=h(e);s!==r&&(typeof r===g&&(z(_,r,!0),(o||n&&c(r))&&a([r],o,_,h,!0)),e.ob=s,typeof s===g&&(z(_,s),(o||n&&c(s))&&a([s],o,_,h))),_(t,i)}}function x(r,a){function s(e,t){var n;if("insert"===t.change||(d="remove"===t.change)){for(n=t.items.length;n--;)x(t.items[n],a.slice());d=!1}}_&&(s._cId=N(_),s._inId=".arIn"+I++);var l,u,b,w,A,T,V,S=r;if(r&&r._cxp)return o(r[0],[r[1]],_,h);for(;void 0!==($=a.shift())&&"__proto__"!==$;){if(S&&typeof S===g&&typeof $===v){if(""===$)continue;if("()"===$.slice(-2)&&($=$.slice(0,-2),V=!0),a.length<E+1&&!S.nodeType){if(!d&&(R=t._data(S).events)){for(R=R&&R[k],H=R&&R.length,u=0;H--;)!(y=R[H].data)||y.ns!==e||y.cb._cId!==_._cId||y.cb._inId!==_._inId||!y._arOk!=!n||y.prop!==$&&"*"!==y.prop&&"**"!==y.prop||((A=a.join("."))&&y.paths.push(A),u++);if(u){T=S[$],S=p(T)?T.call(S):S[$];continue}}if("*"===$||"**"===$){if(!d&&R&&R.length&&Q(_,S,j,X,"",!1,!0),"*"===$)for(A in Q(_,S,j,X,""),S)A!==f&&z(_,S,d,void 0,A);else t.observable(e,S)[(d?"un":"")+"observeAll"](_);break}"[]"==$?c(S)&&(d?Q(_,S,j,C+N(_),void 0,d,d):i(e,S,s,d)):$&&Q(_,S,j,X+".p_"+$,a.join("^"))}if(D&&(D+="."+$),"[]"===$){for(c(S)&&(w=S,l=S.length);l--;)x(S=w[l],a.slice());return}$=S[$],a[0]||z(_,$,d)}if(p($)&&((b=(T=$).depends)&&(S._vw&&S._ocp&&((S=S._vw)._tgId&&(S=S.tagCtx.view),S=S.data),W(m.apply([],[[S],B(b,S,_)]))),V)){if(!a[0]){z(_,T.call(S),d);break}if(!($=T.call(S)))break}S=$}}var w,j,E=0,A=u.length;for(!r||h||!(M="view"===r._is)&&"tag"!==r._is||(h=s._gccb(M?r:r.tagCtx.contentView),_&&!d&&function(){var e=r,t=_;(_=function(n,i){t.call(e,n,i)})._cId=t._cId,_._inId=t._inId}(),r=M?r.data:r),u[0]||(c(r)?z(_,r,d,!0):d&&Q(_,r,void 0,X,"")),w=0;w<A;w++)if(""!==(j=u[w]))if(j&&j._ar)n+=j._ar;else if(typeof j===v)if((l=j.split("^"))[1]&&(E=l[0].split(".").length,j=l.join("."),E=j.split(".").length-E),h&&(V=h(j,E))){if(V.length){var T=V[0],S=V[1];if(T&&T._cxp&&(S=T[1],"view"===(T=T[0])._is)){o(T,[S],_);continue}typeof S===v?x(T,S.split(".")):o(V.shift(),V,_,h)}}else x(r,j.split("."));else!p(j)&&j&&j._cpfn&&((P=d?j.cb||(j.cb=_):b(j))._cId=_._cId,P._inId=P._inId||".obIn"+I++,(j.bnd||j.prm&&j.prm.length||!j.sb)&&a([r],j.path,j.prm.length?[j.root||r]:[],j.prm,P,h,d),j.sb&&(j.sb.prm&&(j.sb.root=r),o(j.ob,[j.sb],_,h)))}for(var _,h=[],b=r.length;b--;)typeof(_=r[b])===v||_&&(_._ar||_._cpfn)?h.unshift(_):(o(_,h,u,A),h=[])}var X=j,G=1!=this?m.apply([],arguments):_.call(arguments),J=G.pop()||!1,Y=G.length;if(typeof J===v&&(D=J,L=G.pop(),U=G.pop(),J=!!G.pop(),Y-=3),J===!!J&&(d=J,J=G[Y-1],J=!Y||typeof J===v||J&&!p(J)?void 0:(Y--,G.pop()),d&&!Y&&p(G[0])&&(J=G.shift())),u=J,Y&&p(G[Y-1])&&(A=u,J=u=G.pop(),Y--),!d||!u||u._cId){for(X+=u?(b=u._inId||"",d?u._cId+b:(h=N(u))+b):"",h&&!d&&(S=w[h]=w[h]||{len:0}),O=(F=e&&e.match(x)||[""]).length;O--;){if(e=F[O],d&&arguments.length<3)if(u)K(u,w[u._cId]);else if(!G[0])for(o in w)K(u,w[o]);W(G)}return h&&!S.len&&delete w[h],{cbId:h,bnd:S,s:w}}}.apply(1,a)},S.wait=function(){var e=this;e._go=1,setTimeout((function(){e.trigger(!0),e._go=0,e.paths={}}))},r=function(e,t,n){typeof e!==v&&(n=t,t=e,e=""),n=void 0===n?d.asyncObserve:n;var i=c(t)?new L(e,t):new P(e,t);return n&&(!0===n&&(i.async=!0,n=S),n.trigger||(c(n)?(n.trigger=R,n.paths={}):n=void 0),i._batch=n),i},t.observable=r,r._fltr=function(e,t,n,i){if(!i||!p(i)||typeof t!==g&&!p(t)||i(e,t,n))return typeof(t=p(t)?t.set&&t.call(n[0]):t)===g&&t},r.Object=P,r.Array=L,t.observe=r.observe=i,t.unobserve=r.unobserve=$,r._apply=D,P.prototype={_data:null,observeAll:U,unobserveAll:F,data:function(){return this._data},setProperty:function(e,t,n,i){var r,a,o,s,l=typeof(e=e||"")!==v,d=this,p=d._data,g=d._batch;if(p)if(l)if(n=t,c(e))for(r=e.length;r--;)a=e[r],d.setProperty(a.name,a.value,void 0===n||n);else{for(r in g||(d._batch=s=[],s.trigger=R,s.paths={}),e)d.setProperty(r,e[r],n);s&&(d._batch.trigger(),d._batch=void 0)}else if(e!==f){for(o=e.split(/[.^]/);p&&o.length>1;)p="__proto__"!==(r=o.shift())?p[r]:void 0;p&&d._setProperty(p,o[0],t,n,i)}return d},removeProperty:function(e){return this.setProperty(e,V),this},_setProperty:function(e,t,n,i,r){var a,o,s,l,d,c=t?e[t]:e;if(p(c)&&!p(n)){if(r&&!c.set)return;c.set&&(d=e._vw||e,a=!0===(o=c).set?o:o.set,c=o.call(d))}(c!==n||i&&c!=n)&&(!(c instanceof Date&&n instanceof Date)||c>n||c<n)&&(a?(a.call(d,n),n=o.call(d)):(s=n===V)?void 0!==c?(delete e[t],n=void 0):t=void 0:t&&(e[t]=n),t&&(l={change:"set",path:t,value:n,oldValue:c,remove:s},e._ocp&&(l.ctxPrm=e._key),this._trigger(e,l)))},_trigger:function(e,n,i){l._cchCt++;var r,a,o,s=this;t.hasData(e)&&(!i&&(a=s._batch)?(s.async&&!a._go&&a.wait(),a.push([s,e,n]),r=T(e).obId+n.path,(o=a.paths[r])&&(a[o-1].skip=1),a.paths[r]=a.length):(t(e).triggerHandler(k+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),n),n.oldValue=null))}},L.prototype={_data:null,observeAll:U,unobserveAll:F,data:function(){return this._data},insert:function(e,t){var n=this._data;return 1===arguments.length&&(t=e,e=n.length),(e=b(e))>-1&&(t=c(t)?t:[t]).length&&this._insert(e,t),this},_insert:function(e,t){var n=this._data,i=n.length;e>i&&(e=i),h.apply(n,[e,0].concat(t)),this._trigger({change:"insert",index:e,items:t},i)},remove:function(e,t){var n,i=this._data;return void 0===e&&(e=i.length-1),e=b(e),(t=t?b(t):0===t?0:1)>0&&e>-1&&(t=(n=i.slice(e,e+t)).length)&&this._remove(e,t,n),this},_remove:function(e,t,n){var i=this._data,r=i.length;i.splice(e,t),this._trigger({change:"remove",index:e,items:n},r)},move:function(e,t,n){return n=n?b(n):0===n?0:1,e=b(e),t=b(t),n>0&&e>-1&&t>-1&&e!==t&&this._move(e,t,n),this},_move:function(e,t,n){var i,r=this._data,a=r.length,o=e+n-a;o>0&&(n-=o),n&&(i=r.splice(e,n),t>r.length&&(t=r.length),h.apply(r,[t,0].concat(i)),t!==e&&this._trigger({change:"move",oldIndex:e,index:t,items:i},a))},refresh:function(e){function t(){r&&(s.insert(i-r,l),f+=r,n+=r,r=0,l=[])}var n,i,r,a,o,s=this,l=[],d=s._data,p=d.slice(),c=d.length,f=c,v=e.length;for(s._srt=!0,i=r=0;i<v;i++)if((a=e[i])===d[i-r])t();else{for(n=i-r;n<f&&a!==d[n];n++);if(n<f){for(t(),o=0;o++<v-n&&e[i+o]===d[n+o];);s.move(n,i,o),i+=o-1}else r++,l.push(a)}return t(),f>i&&s.remove(i,f-i),s._srt=void 0,(c||v)&&s._trigger({change:"refresh",oldItems:p},c),s},_trigger:function(e,n,i){l._cchCt++;var r,a,o,s=this;t.hasData(a=s._data)&&(!i&&(o=s._batch)?(e._dly=!0,o.push([s,e,n]),s.async&&!o._go&&o.wait()):(r=a.length,a=t([a]),s._srt?e.refresh=!0:r!==n&&a.triggerHandler(k,{change:"set",path:"length",value:r,oldValue:n}),a.triggerHandler(C+(s._ns?"."+/^\S+/.exec(s._ns)[0]:""),e)))}},u[k]=u[C]={remove:function(e){var n,i,r,a,o,s=e.data;if(s&&(s.off=!0,s=s.cb)&&(n=w[s._cId])){for(a=(r=t._data(this).events[e.type]).length;a--&&!i;)i=(o=r[a].data)&&o.cb&&o.cb._cId===s._cId;i||(--n.len?delete n[T(this).obId]:delete w[s._cId])}}},o.map=function(e){function n(t,n,i,a){var o,s,l=this;l.src&&l.unmap(),n&&(n.map=l),(typeof t===g||p(t))&&(l.src=t,a?l.tgt=e.getTgt(t,n):(i&&(l.tgt=i.tgt||c(i)&&i),l.tgt=l.tgt||[],l.options=n||l.options,(s=l.update())?l=s:(e.obsSrc&&r(l.src).observeAll(l.obs=function(t,n){o||n.refresh||(o=!0,e.obsSrc(l,t,n),o=void 0)},l.srcFlt),e.obsTgt&&r(l.tgt).observeAll(l.obt=function(t,n){o||l.tgt._updt||(o=!0,e.obsTgt(l,t,n),o=void 0)},l.tgtFlt))))}return p(e)&&(e={getTgt:e}),e.baseMap&&(e=t.extend({},e.baseMap,e)),e.map=function(e,t,i,r){return new n(e,t,i,r)},(n.prototype={srcFlt:e.srcFlt||M,tgtFlt:e.tgtFlt||M,update:function(t){var n,i,a=this,o=a.tgt;if(!o._updt&&(o._updt=!0,n=a.options&&a.options.map,r(o).refresh(e.getTgt(a.src,a.options=t||a.options)),o._updt=!1,(i=a.options&&a.options.map)&&n!==i))return i},observe:function(e,n){var i=this,a=i.options;i.obmp&&$(i.obmp),i.obmp=function(){var e=n.fn(n.data,n.view,s)[a.index];t.extend(a.props,e.props),a.args=e.args,i.update()},r._apply(1,n.data,B(e,n.tag,i.obmp),i.obmp,n._ctxCb)},unmap:function(){var e=this;e.src&&e.obs&&r(e.src).unobserveAll(e.obs,e.srcFlt),e.tgt&&e.obt&&r(e.tgt).unobserveAll(e.obt,e.tgtFlt),e.obmp&&$(e.obmp),e.src=void 0},map:n,_def:e}).constructor=n,e},s.advSet=function(){s=this,d=l.advanced,e._jsv=d._jsv?{cbBindings:w}:void 0},s._dp=B,s._gck=N,s._obs=i,l._cchCt=0,d=l.advanced=d||{useViews:!1,_jsv:!1}}return t}),window),/*! jquery.views.js v1.0.16: http://jsviews.com/ */
function(e,t){var n=t.jQuery;"object"==typeof exports?module.exports=n?e(t,n):function(n){return e(t,n)}:"function"==typeof define&&define.amd?define(["jquery","./jsrender","./jquery.observable"],(function(n,i,r){return e(t,n,i,r)})):e(t,!1)}((function(e,t,n,i){"use strict";n=n||!1===t&&e.jsrender;var r="v1.0.16",a="jquery.views.js requires ";if(!(t=t||e.jQuery)||!t.fn)throw a+"jQuery";n&&!n.fn&&n.views.sub._jq(t);var o,s,l=function(e){return"function"==typeof e},d=Array.isArray,p=t.views;if(!t.render)throw a+"jsrender.js";if(p.jsviews!==r)throw a+"query.observable.js "+r;if(!p||!p.map||p.jsviews!==r)throw a+"jsrender.js "+r;var c,f,v,g,u,_,h=e.document,m=p.settings,b=p.sub,x=b.settings,y=b.extend,k=(t.expando,p.converters),C=p.tags,w=x.advanced,j=b.propChng=b.propChng||"propertyChange",E=b.arrChng=b.arrChng||"arrayChange",A="string",I="html",T="_ocp",V=b.syntaxErr,S=/<(?!script)(\w+)[>\s]/,N=b._er,P=b._err,L=/['"\\]/g;if(t.link)return t;x.trigger=!0;var B,q,D,U,F,O,M,$,R,H=void 0!==h.textContent?"textContent":"innerText",K="data-jsv",Q="change.jsv",z="onBeforeChange",W="onAfterChange",X="onAfterCreate",G="checked",J="checkbox",Y="radio",Z="input[type=",ee=Z+J+"]",te="none",ne="value",ie="SCRIPT",re="true",ae="plaintext-only",oe='"><\/script>',se='<script type="jsv',le=K+"-df",de="script,["+K+"]",pe={value:"val",input:"val",html:I,text:"text"},ce={from:ne,to:ne},fe=0,ve=t.cleanData,ge=m.delimiters,ue={},_e=h.createDocumentFragment(),he=h.querySelector,me={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},be={tr:"table"},xe={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},ye={},ke={},Ce=1,we=/^#(view\.?)?/,je=/((\/>)|<\/(\w+)>|)(\s*)([#/]\d+(?:_|(\^)))`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>)|$)/g,Ee=/(#)()(\d+)(_)/g,Ae=/(#)()(\d+)([_^])/g,Ie=/(?:(#)|(\/))(\d+)(_)/g,Te=/(?:(#)|(\/))(\d+)(\^)/g,Ve=/(#)()(\d+)(\^)/g,Se=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,Ne=/^[^.]*$/,Pe=e.getComputedStyle,Le=t.inArray;if(Z+=Y+"]",!(s=t.observable))throw a+"jquery.observable.js";function Be(e,t,n,i,r){var a,o,p,c,f,v,g,u,_,h,m,b,x,y,k,C,w,j,E,I,V,S;if(i&&i._tgId&&(i=(I=i)._tgId,I.bindTo||(st(ke[i],I),I.bindTo=[0])),(v=ke[i])&&(x=v.to)){if(x=x[t||0],_=(a=v.linkCtx).elem,f=a.view,!(I=a.tag)&&x._cxp&&(I=x._cxp.path!==T&&x._cxp.tag,g=e[0],(e=[])[x._cxp.ind]=g),I&&(I._.chg=1,(p=I.convertBack)&&(o=l(p)?p:f.getRsc("converters",p))),"SELECT"===_.nodeName)_.multiple&&null===e[0]&&(e=[[]]),_._jsvSel=e;else if(_._jsvSel){if((I=_._jsvLkEl)&&I.tagCtx.params.props.linkTo)for(j=(b=I.linkedElem).length,V=[];j--;)(m=b[j]).checked&&V.unshift(m.value);else V=_._jsvSel.slice(),(S=Le(_.value,V))>-1&&!_.checked?V.splice(S,1):S<0&&_.checked&&V.push(_.value);e=[V]}for(u=e,j=x.length,o&&(void 0===(e=o.apply(I,e))&&(x=[]),d(e)&&(!1===e.arg0||1!==j&&e.length===j&&!e.arg0)||(e=[e]));j--;)if((y=x[j])&&(c=(y=typeof y===A?[a.data,y]:y)[0],k=y.tag,!(void 0===(g=(c&&c._ocp&&!c._vw?u:e)[j])||I&&I.onBeforeUpdateVal&&!1===I.onBeforeUpdateVal(r,{change:"change",data:c,path:y[1],index:j,tagElse:t,value:g}))))if(k)void 0!==(E=k._.toIndex[y.ind])&&k.updateValue(g,E,y.tagElse,void 0,void 0,r),k.setValue(g,y.ind,y.tagElse);else if(void 0!==g&&c){if((k=r&&(h=r.target)._jsvInd===j&&h._jsvLkEl)&&void 0!==(E=k._.fromIndex[j])&&k.setValue(u[j],E,h._jsvElse),c._cpfn)for(w=a._ctxCb,C=c,c=a.data,C._cpCtx&&(c=C.data,w=C._cpCtx);C&&C.sb;)c=w(C),C=C.sb;s(c,n).setProperty(y[1],g,void 0,y.isCpfn)}}if(I)return I._.chg=void 0,I}function qe(e){var n,i,r=e.target,a=$e(r),o=pe[a],s=/&(\d+)\+?/g;if(!r._jsvTr||e.delegateTarget!==B&&"number"!==r.type||"input"===e.type){for(i=l(a)?a(r):o?t(r)[o]():t(r).attr(a),r._jsvChg=1;n=s.exec(r._jsvBnd);)_t(i,r._jsvInd,r._jsvElse,void 0,n[1],e);r._jsvChg=void 0}}function De(e,t){var n,i,r,a,o,s,d,p,c,f=this,v=f.fn,g=f.tag,u=f.data,_=f.elem,h=f.convert,m=_.parentNode,x=f.view,y=x._lc,k=t&&vt(x,z,g);if(m&&(!k||!1!==k.call(g||f,e,t))&&(!t||"*"===e.data.prop||e.data.prop===t.path)){if(x._lc=f,t||f._toLk){if(f._toLk=0,v._er)try{i=v(u,x,b)}catch(e){o=v._er,i=[{props:{},args:[s=P(e,x,new Function("data,view","return "+o+";")(u,x))],tag:g}]}else i=v(u,x,b);if(n=g&&g.attr||f.attr||(f._dfAt=$e(_,!0,void 0!==h)),f._dfAt===ne&&(g&&g.parentElem||f.elem).type===J&&(n=G),g){if(a=o||g._er,i=i[0]?i:[i],r=!a&&(!1===g.onUpdate||t&&l(g.onUpdate)&&!1===g.onUpdate(e,t,i)),dt(g,i,a),g._.chg&&(n===I||n===ne)||r||n===te)return it(g,e,t),g._.chg||Ke(f,u,_),x._lc=y,t&&(k=vt(x,W,g))&&k.call(g||f,e,t),void(g.tagCtx.props.dataMap&&g.tagCtx.props.dataMap.map(g.tagCtx.args[0],g.tagCtx,g.tagCtx.map,isRenderCall||!g._.bnd));for(g.onUnbind&&g.onUnbind(g.tagCtx,f,g.ctx,e,t),g.linkedElems=g.linkedElem=g.mainElem=g.displayElem=void 0,c=g.tagCtxs.length;c--;)(p=g.tagCtxs[c]).linkedElems=p.mainElem=p.displayElem=void 0;i=":"===g.tagName?b._cnvt(g.convert,x,i[0]):b._tag(g,x,x.tmpl,i,!0,s)}else v._tag&&(i=(h=""===h?re:h)?b._cnvt(h,x,i[0]||i):b._tag(v._tag,x,x.tmpl,i,!0,s),mt(g=f.tag),n=f.attr||n);(d=g&&(!g.inline||f.fn._lr)&&g.template)&&Ke(f,u,_),Fe(i,f,n,g),f._noUpd=0,g&&(g._er=o,it(g,e,t))}d||Ke(f,u,_),g&&g._.ths&&g.updateValue(g,g.bindTo?g.bindTo.length:1),t&&(k=vt(x,W,g))&&k.call(g||f,e,t),x._lc=y}}function Ue(e,t){e._df=t,e[(t?"set":"remove")+"Attribute"](le,"")}function Fe(n,i,r,a){var o,s,l,p,c,f,v,g,u,_,m,b,x,y,k=!(r===te||void 0===n||i._noUpd||(r===ne||r===I)&&!a&&i.elem._jsvChg),C=i.data,w=a&&a.parentElem||i.elem,j=w.parentNode,E=t(w),A=i.view,T=i._val,V=a;if(a&&(a._.unlinked=!0,a.parentElem=a.parentElem||i.expr||a._elCnt?w:j,s=a._prv,l=a._nxt),k)return"visible"===r&&(r="css-display"),/^css-/.test(r)?("visible"===i.attr&&(x=(w.currentStyle||Pe.call(e,w,"")).display,n?(n=w._jsvd||x)!==te||(n=ye[b=w.nodeName])||(m=h.createElement(b),h.body.appendChild(m),n=ye[b]=(m.currentStyle||Pe.call(e,m,"")).display,h.body.removeChild(m)):(w._jsvd=x,n=te)),(V=V||T!==n)&&t.style(w,r.slice(4),n)):"link"!==r&&(/^data-/.test(r)?t.data(w,r.slice(5),n):/^prop-/.test(r)?(f=!0,r=r.slice(5)):r===G?(f=!0,w.name&&null==n&&w._jsvLkEl&&"checkboxgroup"===w._jsvLkEl.tagName&&(n=[]),w.name&&d(n)?(w._jsvSel=n,n=Le(w.value,n)>-1):n=n&&"false"!==n):r===Y?(f=!0,r=G,n=w.value===n):"selected"===r||"disabled"===r||"multiple"===r||"readonly"===r||"required"===r?n=n&&"false"!==n?r:null:r===ne&&"SELECT"===w.nodeName&&(w._jsvSel=d(n)?n:""+n),(o=pe[r])?r===I?a&&a.inline?(c=a.nodes(!0),a._elCnt&&(s&&s!==l?gt(s,l,w,a._tgId,"^",!0):(v=s?s.getAttribute(K):w._df,g=a._tgId+"^",u=v.indexOf("#"+g)+1,_=v.indexOf("/"+g),u&&_>0&&_>(u+=g.length)&&(ut(v.slice(u,_)),v=v.slice(0,u)+v.slice(_),s?s.setAttribute(K,v):w._df&&Ue(w,v))),s=s?s.previousSibling:l?l.previousSibling:w.lastChild),t(c).remove(),p=A.link(A.data,w,s,l,n,a&&{tag:a._tgId})):(k=k&&T!==n)&&(E.empty(),p=A.link(C,w,s,l,n,a&&{tag:a._tgId})):w._jsvSel?E[o](n):((V=V||T!==n)&&("text"===r&&w.children&&!w.children[0]?w[H]=null===n?"":n:E[o](n)),void 0===(y=j._jsvSel)||r!==ne&&void 0!==E.attr(ne)||(w.selected=Le(""+n,d(y)?y:[y])>-1)):(V=V||T!==n)&&E[f?"prop":"attr"](r,void 0!==n||f?n:null)),i._val=n,Qe(p),V;i._val=n}function Oe(e,t){var n=this,i=vt(n,z,n.tag),r=vt(n,W,n.tag);if(!i||!1!==i.call(n,e,t)){if(t){var a=t.change,o=t.index,s=t.items;switch(n._.srt=t.refresh,a){case"insert":n.addViews(o,s,t._dly);break;case"remove":n.removeViews(o,s.length,void 0,t._dly);break;case"move":n.moveViews(t.oldIndex,o,s.length);break;case"refresh":n._.srt=void 0,n.fixIndex(0)}}r&&r.call(n,e,t)}}function Me(e){var n,i,r=e.type,a=e.data,o=e._.bnd;!e._.useKey&&o&&((i=e._.bndArr)&&(t([i[1]]).off(E,i[0]),e._.bndArr=void 0),o!==!!o?r?o._.arrVws[e._.id]=e:delete o._.arrVws[e._.id]:r&&a&&(n=function(t){t.data&&t.data.off||Oe.apply(e,arguments)},t([a]).on(E,n),e._.bndArr=[n,a]))}function $e(e,t,n){var i=e.nodeName.toLowerCase(),r=w._fe[i]||(e.contentEditable===re||e.contentEditable===ae)&&{to:I,from:I};return r?t?"input"===i&&e.type===Y?Y:r.to:r.from:t?n?"text":I:""}function Re(e,n,i,r,a,o,s){var l,d,p,c,f,v=e.parentElem,g=e._prv,u=e._nxt,_=e._elCnt;if(g&&g.parentNode!==v&&N("Missing parentNode"),s)for(f in c=e.nodes(),_&&g&&g!==u&&gt(g,u,v,e._.id,"_",!0),e.removeViews(void 0,void 0,!0),d=u,_&&(g=g?g.previousSibling:u?u.previousSibling:v.lastChild),t(c).remove(),e._.bnds)ct(f);else{if(n){if(!(p=r[n-1]))return!1;g=p._nxt}_?g=(d=g)?d.previousSibling:v.lastChild:d=g.nextSibling}l=i.render(a,o,e._.useKey&&s,e,s||n,!0),Qe(e.link(a,v,g,d,l,p))}function He(e,t,n){var i,r;return n?(r="^`",mt(n),(i=n._tgId)||(ke[i=Ce++]=n,n._tgId=""+i)):(r="_`",M[i=t._.id]=t),"#"+i+r+(null!=e?e:"")+"/"+i+r}function Ke(e,t,n){var i,r,a,o,l,d,p,c,f,v,g,u,_=e.tag,h=!_,m=e.convertBack,x=e._hdl;if(t="object"==typeof t&&t,_&&((f=_.convert)&&(f=f===re?_.tagCtx.props.convert:f,f=(f=(f=e.view.getRsc("converters",f)||f)&&f.depends)&&b._dp(f,t,x)),(v=_.tagCtx.props.depends||_.depends)&&(v=b._dp(v,_,x),f=f?f.concat(v):v),u=_.linkedElems),f=f||[],!e._depends||""+e._depends!=""+f){if(l=e.fn.deps.slice(),e._depends&&(g=e._depends.bdId,s._apply(1,[t],l,e._depends,x,e._ctxCb,!0)),_){for(r=_.boundProps.length;r--;)for(p=_.boundProps[r],a=_._.bnd.paths.length;a--;)(c=_._.bnd.paths[a]["_"+p])&&c.length&&c.skp&&(l=l.concat(c));h=void 0===_.onArrayChange||!0===_.onArrayChange}for(r=l.length;r--;)(d=l[r])._cpfn&&(l[r]=y({},d));if(i=s._apply(h?0:1,[t],l,f,x,e._ctxCb),g||(g=e._bndId||""+Ce++,e._bndId=void 0,n._jsvBnd=(n._jsvBnd||"")+"&"+g,e.view._.bnds[g]=g),i.elem=n,i.linkCtx=e,i._tgId=g,f.bdId=g,e._depends=f,ke[g]=i,(u||void 0!==m||_&&_.bindTo)&&st(i,_,m),u)for(r=u.length;r--;)for(a=(o=u[r])&&o.length;a--;)o[a]._jsvLkEl?o[a]._jsvBnd||(o[a]._jsvBnd="&"+g+"+"):(o[a]._jsvLkEl=_,ot(_,o[a]),o[a]._jsvBnd="&"+g+"+");else void 0!==m&&ot(_,n);_&&!_.inline&&(_.flow||n.setAttribute(K,(n.getAttribute(K)||"")+"#"+g+"^/"+g+"^"),_._tgId=""+g)}}function Qe(e){var t;if(e)for(;t=e.pop();)t._hdl()}function ze(e,t,n,i,r,a,o){return We(this,e,t,n,i,r,a,o)}function We(e,n,i,r,a,o,s,l){if(!0===r?(a=r,r=void 0):r="object"!=typeof r?void 0:y({},r),e&&n){n=n.jquery?n:t(n),B||(B=h.body,R="oninput"in B,t(B).on(Q,qe).on("blur.jsv","[contenteditable]",qe));for(var d,p,c,f,v,g,u,m,b,x,k=He,C=r&&"replace"===r.target,w=n.length;w--;){if(u=n[w],x=o||D(u),typeof e===A)Ge(b=[],e,u,x,void 0,"expr",i,r);else{if(void 0!==e.markup)C&&(g=u.parentNode),x._.scp=!0,c=e.render(i,r,a,x,void 0,k,!0),x._.scp=void 0,g?(s=u.previousSibling,l=u.nextSibling,t.cleanData([u],!0),g.removeChild(u),u=g):(s=l=void 0,t(u).empty());else{if(!0!==e||x!==_)break;m={lnk:"top"}}if(u._df&&!l){for(d=0,p=(f=et(u._df,!0,Ee)).length;d<p;d++)v=f[d],(v=M[v.id])&&void 0!==v.data&&v.parent.removeViews(v._.key,void 0,!0);Ue(u)}b=x.link(i,u,s,l,c,m,r)}Qe(b)}}return n}function Xe(e,n,i,r,a,o,s,l){function d(e,t){var i,r,a,o,s,l,d,p=[];if(e){for("@"===e._tkns.charAt(0)&&(t=x.previousSibling,x.parentNode.removeChild(x),x=void 0),m=e.length;m--;){if(a=(k=e[m]).ch,i=k.path)for(_=i.length-1;r=i.charAt(_--);)"+"===r?"-"===i.charAt(_)?(_--,t=t.previousElementSibling):t=t.parentNode:t=t.lastElementChild;"^"===a?(v=ke[s=k.id])&&(d=t&&(!x||x.parentNode!==t),x&&!d||(v.parentElem=t),k.elCnt&&d&&Ue(t,(k.open?"#":"/")+s+a+(t._df||"")),p.push([d?null:x,k])):(y=M[s=k.id])&&(y.parentElem||(y.parentElem=t||x&&x.parentNode||n,y._.onRender=He,y._.onArrayChange=Oe,Me(y)),o=y.parentElem,k.open?(y._elCnt=k.elCnt,t&&!x?Ue(t,"#"+s+a+(t._df||"")):(y._prv||Ue(o,Ye(o._df,"#"+s+a)),y._prv=x)):(!t||x&&x.parentNode===t?x&&(y._nxt||Ue(o,Ye(o._df,"/"+s+a)),y._nxt=x):(Ue(t,"/"+s+a+(t._df||"")),y._nxt=void 0),(l=vt(y,X)||Te)&&l.call(y.ctx.tag,y)))}for(m=p.length;m--;)Ce.push(p[m])}return!e||e.elCnt}function p(e){var t,n,i;if(e)for(m=e.length,_=0;_<m;_++)if(k=e[_],!(v=ke[k.id])._is&&v.linkCtx&&(n=v=v.linkCtx.tag,i=v.tagName===q,!v.flow||i)){if(!B){for(t=1;n=n.parent;)t++;H=H||t}!B&&t!==H||q&&!i||L.push(v)}}var c,f,v,g,u,_,m,b,x,y,k,C,j,E,I,T,P,L,B,q,$,R,H,Q,z,W,G,J,Y,Z,ee,te,ne,ie,re,ae,de,pe,ce,fe,ve,ge=this,ue=ge._.id+"_",ye="",Ce=[],we=[],Ee=[],Ae=[],Te=vt(ge,X),Se=d;if(o&&(o.tmpl?I="/"+o._.id+"_":(fe=o.lnk,o.tag&&(ue=o.tag+"^",o=!0),(ve=o.get)&&(Se=p,L=ve.tags,B=ve.deep,q=ve.name)),o=!0===o),n=n?typeof n===A?t(n)[0]:n.jquery?n[0]:n:ge.parentElem||h.body,R=!w.noValidate,J=n.tagName.toLowerCase(),ne=!!me[J],i=i&&nt(i,ne),r=r&&nt(r,ne)||null,null!=a){if(Z=ee=h.createElement("div"),de=ae="",re="http://www.w3.org/2000/svg"===n.namespaceURI?"svg_ns":(G=S.exec(a))&&G[1]||"",ne){for(P=r;P&&!(T=et(P));)P=P.nextSibling;(te=T?T._tkns:n._df)&&(E=I||"",!o&&I||(E+="#"+ue),(_=te.indexOf(E))+1&&(_+=E.length,de=ae=te.slice(0,_),te=te.slice(_),T?P.setAttribute(K,te):Ue(n,te)))}if(Y=void 0,a=(""+a).replace(je,(function(e,t,n,i,r,o,s,l,d,p,f,g,u,_){var h,m,b="";return _?(c=0,e):(v=(d||p||"").toLowerCase(),i=i||f,n=n||u,Y&&!n&&(!e||i||v||o&&!c)&&(Y=void 0,J=we.shift()),(i=i||n)&&(i=i.toLowerCase(),c=0,Y=void 0,R&&(n||u?xe[J]||/;svg;|;math;/.test(";"+we.join(";")+";")||(h="'<"+J+".../"):xe[i]?h="'</"+i:we.length&&i===J||(h="Mismatch: '</"+i),h&&V(h+">' in:\n"+a)),ie=ne,J=we.shift(),ne=me[J],f=f?"</"+f+">":"",ie&&(ye+=ae,ae="",ne?ye+="-":(b=f+se+"@"+ye+oe+(g||""),ye=Ee.shift()))),ne&&!c?(o?ae+=o:t=f||u||"",v&&(t+=v,ae&&(t+=" "+K+'="'+ae+'"',ae=""))):t=o?t+b+r+(c?"":se+o+oe)+l+v:b||e,R&&s&&(c&&V("{^{ within elem markup ("+c+' ). Use data-link="..."'),"#"===o.charAt(0)?we.unshift(o.slice(1)):o.slice(1)!==(m=we.shift())&&V("Closing tag for {^{...}} under different elem: <"+m+">")),v&&(c=v,we.unshift(J),J=v.slice(1),R&&we[0]&&we[0]===be[J]&&N("Parent of <tr> must be <tbody>"),Y=xe[J],(ne=me[J])&&!ie&&(Ee.unshift(ye),ye=""),ie=ne,ye&&ne&&(ye+="+")),t)})),R&&we.length&&V("Mismatched '<"+J+"...>' in:\n"+a),l)return;for(_e.appendChild(ee),Q=(re=O[re]||O.div)[0],Z.innerHTML=re[1]+a+re[2];Q--;)Z=Z.lastChild;for(_e.removeChild(ee),z=h.createDocumentFragment();W=Z.firstChild;)z.appendChild(W);n.insertBefore(z,r)}return function(){var o,l,c="",_={},h=F+(ve?",["+le+"]":"");for(b=he?n.querySelectorAll(h):t(h,n).get(),u=b.length,i&&i.innerHTML&&(j=he?i.querySelectorAll(h):t(h,i).get(),i=j.length?j[j.length-1]:i),H=0,g=0;g<u;g++)if(x=b[g],i&&!pe)pe=x===i;else{if(r&&x===r){ve&&(c+=Ze(x));break}if(x.parentNode)if(ve){if(c+=Ze(x),x._df){for(o=g+1;o<u&&x.contains(b[o]);)o++;_[o-1]=x._df}_[g]&&(c+=_[g]||"")}else fe&&(k=et(x,void 0,Ie))&&(k=k[0])&&(ce=ce?k.id!==ce&&ce:k.open&&k.id),!ce&&Se(et(x))&&x.getAttribute(U)&&Ce.push([x])}if(ve&&((l=(c+=n._df||"").indexOf("#"+ve.id)+1)&&(c=c.slice(l+ve.id.length)),(l=c.indexOf("/"+ve.id))+1&&(c=c.slice(0,l)),p(et(c,void 0,Ve))),void 0===a&&n.getAttribute(U)&&Ce.push([n]),tt(i,ne),tt(r,ne),!ve)for(ne&&ye+ae&&(x=r,ye&&(r?d(et(ye+"+",!0),r):d(et(ye,!0),n)),d(et(ae,!0),n),r&&(c=r.getAttribute(K),(u=c.indexOf(de)+1)&&(c=c.slice(u+de.length-1)),r.setAttribute(K,ae+c))),u=Ce.length,g=0;g<u;g++)x=Ce[g],C=x[1],x=x[0],C?(v=ke[C.id])&&((f=v.linkCtx)&&((v=f.tag).linkCtx=f),C.open?(x&&(v.parentElem=x.parentNode,v._prv=x),v._elCnt=C.elCnt,y=v.tagCtx.view,Ge(Ae,void 0,v._prv,y,C.id)):(v._nxt=x,v._.unlinked&&!v._toLk&&($=v.tagCtx,y=$.view,it(v)))):Ge(Ae,x.getAttribute(U),x,D(x),void 0,fe,e,s)}(),Ae}function Ge(e,n,i,r,a,o,s,l){var d,p,u,_,h,m,x,y,k,C,w,j=[];if(a)x=(y=(y=ke[a]).linkCtx?y.linkCtx.tag:y).linkCtx||{type:"inline",data:r.data,elem:y._elCnt?y.parentElem:i,view:r,ctx:r.ctx,attr:I,fn:y._.bnd,tag:y,_bndId:a},y.linkCtx=x,Je(x,e),y._toLk=x._bndId;else if(n&&i){for(s=o?s:r.data,d=r.tmpl,n=function(e,n){return e=t.trim(e),e.slice(-1)!==v?e=f+":"+e+(n?":":"")+v:e}(n,$e(i)),w=q.lastIndex=0;p=q.exec(n);)j.push(p),w=q.lastIndex;for(w<n.length&&V(n);p=j.shift();){for(k=q.lastIndex,u=p[1],h=p[3];j[0]&&"else"===j[0][4];)h+=g+c+j.shift()[3],C=!0;C&&(h+=g+c+f+"/"+p[4]+v),x={type:o||"link",data:s,elem:i,view:r,ctx:l,attr:u,_toLk:1,_noUpd:p[2]},_=void 0,p[6]&&(_=p[10]||void 0,x.convert=p[5]||"",void 0!==_&&(u&&V(h+"- Remove target: "+u),x.convertBack=_=_.slice(1))),x.expr=u+h,(m=ue[h])||(ue[h]=m=b.tmplFn(h.replace(L,"\\$&"),d,!0,_,C)),x.fn=m,Je(x,e),q.lastIndex=k}}}function Je(e,n){function i(t,n){n&&n.refresh||De.call(e,t,n)}var r,a=e.type;if("top"!==a&&"expr"!==a||(e.view=new b.View(b.extendCtx(e.ctx,e.view.ctx),"link",e.view,e.data,e.expr,void 0,He)),e._ctxCb=b._gccb(r=e.view),e._hdl=i,"SELECT"===e.elem.nodeName&&(e.elem._jsvLkEl||"link"===a&&!e.attr&&void 0!==e.convert)){var o,s=e.elem,l=t(s);l.on("jsv-domchange",(function(){arguments[3].refresh||(s._jsvLkEl?l.val(s._jsvLkEl.cvtArgs(s._jsvElse,1)[s._jsvInd]):e.tag?l.val(e.tag.cvtArgs(0,1)):(o=e.fn(r.data,r,b),l.val(e.convert||e.convertBack?b._cnvt(e.convert,r,o):o)))}))}e.fn._lr?(e._toLk=1,n.push(e)):i(!0)}function Ye(e,t){var n;return e?(n=e.indexOf(t))+1?e.slice(0,n)+e.slice(n+t.length):e:""}function Ze(e){return e&&(typeof e===A?e:e.tagName===ie?e.type.slice(3):1===e.nodeType&&e.getAttribute(K)||"")}function et(e,t,n){var i,r,a=[];if(r=t?e:Ze(e))return i=a.elCnt=e.tagName!==ie,i="@"===r.charAt(0)||i,a._tkns=r,r.replace(n||Se,(function(e,t,n,r,o,s){a.push({elCnt:i,id:r,ch:o,open:t,close:n,path:s,token:e})})),a}function tt(e,t){e&&("jsv"===e.type?e.parentNode.removeChild(e):t&&""===e.getAttribute(U)&&e.removeAttribute(U))}function nt(e,t){for(var n=e;t&&n&&1!==n.nodeType;)n=n.previousSibling;return n&&(1!==n.nodeType?((n=h.createElement(ie)).type="jsv",e.parentNode.insertBefore(n,e)):Ze(n)||n.getAttribute(U)||n.setAttribute(U,"")),n}function it(e,n,i){function r(){(a=C.linkedElems||e.linkedElems||e.linkedElem&&[e.linkedElem])&&(e.linkedElems=C.linkedElems=a,e.linkedElem=a[0]=e.linkedElem||a[0]),(s=C.mainElem||e.mainElem)&&(C.mainElem=e.mainElem=s),(s=C.displayElem||e.displayElem)&&(C.displayElem=e.displayElem=s)}var a,o,s,l,p,c,f,v,g,u,_,h,m,b,x,y,k,C=e.tagCtx,w=e.tagCtxs,j=w&&w.length,E=e.linkCtx,A=e.bindTo||{};if(e._.unlinked){if(c=t(E.elem),e.linkedElement||e.mainElement||e.displayElement){if(o=e.linkedElement)for(e.linkedElem=void 0,l=o.length;l--;)if(o[l])for(f=!e.inline&&c.filter(o[l]),p=j;p--;)u=w[p],a=u.linkedElems=u.linkedElems||new Array(l),(s=f[0]?f:u.contents(!0,o[l]))[0]&&s[0].type!==Y&&(a[l]=s.eq(0));if(o=e.mainElement)for(f=!e.inline&&c.filter(o),p=j;p--;)u=w[p],(s=f[0]?f:u.contents(!0,o).eq(0))[0]&&(u.mainElem=s);if(o=e.displayElement)for(f=!e.inline&&c.filter(o),p=j;p--;)u=w[p],(s=f[0]?f:u.contents(!0,o).eq(0))[0]&&(u.displayElem=s);r()}e.onBind&&(e.onBind(C,E,e.ctx,n,i),r())}for(p=j;p--;){if(_=(u=w[p]).props,e._.unlinked&&u.map&&e.mapProps){for(x=e.mapProps.length,y=_.mapDepends||e.mapDepends||[],y=d(y)?y:[y];x--;){var I=e.mapProps[x];(k=e._.bnd.paths[p]["_"+I])&&k.length&&k.skp&&(y=y.concat(k))}y.length&&u.map.observe(y,E)}(s=u.mainElem||!e.mainElement&&u.linkedElems&&u.linkedElems[0])&&(s[0]&&_.id&&!s[0].id&&(s[0].id=_.id),e.setSize&&((h=!A.height&&_.height||e.height)&&s.height(h),(h=!A.width&&_.width||e.width)&&s.width(h))),(h=(s=u.displayElem||s)&&(!A.class&&_.class||e.className))&&h!==(m=s[0]._jsvCl)&&(s.hasClass(m)&&s.removeClass(m),s.addClass(h),s[0]._jsvCl=h)}if(e.onAfterLink&&(e.onAfterLink(C,E,e.ctx,n,i),r()),!e.flow&&!e._.chg)for(e._tgId&&e._.unlinked&&(e.linkedElems||e.bindTo)&&st(ke[e._tgId],e),p=w.length;p--;){for(l=(_=e.cvtArgs(p,1)).length;l--;)e.setValue(_[l],l,p,n,i);if(e._.unlinked)for(C=w[p],a=C.linkedElems||!p&&e.linkedElem&&[e.linkedElem],b=(e.bindTo||[0]).length;b--;)if((s=a&&a[b])&&(l=s.length))for(;l--;)(g=(v=s[l])._jsvLkEl)&&g===e||(v._jsvLkEl=e,v._jsvInd=b,v._jsvElse=p,ot(e,v),e._tgId&&(v._jsvBnd="&"+e._tgId+"+"))}e._.unlinked=void 0,e._.lt&&e.refresh()}function rt(e){var t=e.which;t>15&&t<21||t>32&&t<41||t>111&&t<131||27===t||144===t||setTimeout((function(){qe(e)}))}function at(e,t,n){!0===t&&R?e[n]("input.jsv",qe):(t=typeof t===A?t:"keydown.jsv",e[n](t,t.indexOf("keydown")>=0?rt:qe))}function ot(e,n){var i,r,a=n._jsvTr||!1;e&&void 0===(r=e.tagCtx.props.trigger)&&(r=e.trigger),void 0===r&&(r=x.trigger),a!==(r=r&&("INPUT"===n.tagName&&n.type!==J&&n.type!==Y||"textarea"===n.type||n.contentEditable===re||n.contentEditable===ae)&&r||!1)&&(at(i=t(n),a,"off"),at(i,n._jsvTr=r,"on"))}function st(e,t,n){var i,r,a,o,s,l,d,p,c,f,v,g,u,_,h,m=1,b=[],x=e.linkCtx,y=x.data,k=x.fn.paths;if(e&&!e.to){for(t&&(t.convertBack||(t.convertBack=n),l=t.bindTo,m=t.tagCtxs?t.tagCtxs.length:1);m--;){if(u=[],g=k[m])for(l=g._jsvto?["jsvto"]:l||[0],!m&&t&&t._.ths&&(l=l.concat("this")),p=l.length;p--;){if(r="",v=x._ctxCb,i=(d=g[+(d=l[p])===d?d:"_"+d])&&d.length){if((a=d[i-1])._cpfn){for(o=a;a.sb&&a.sb._cpfn;)r=a=a.sb;r=a.sb||r&&r.path,h=a._cpfn&&!a.sb,a=r?r.slice(1):o.path}s=r?[o,a]:lt(a,y,v)}else f=t.linkedCtxParam,s=[],(_=t._.fromIndex)&&f&&f[_[p]]&&(s=[t.tagCtxs[m].ctx[f[_[p]]][0],T]);(c=s._cxp)&&c.tag&&a.indexOf(".")<0&&(s=c),s.isCpfn=h,u.unshift(s)}b.unshift(u)}e.to=b}}function lt(e,t,n){for(var i,r,a,o,s,l,d,p;e&&e!==T&&(a=n(i=e.split("^").join(".")))&&(o=a.length);){if(s=a[0]._cxp)if(d=d||s,l=a[0][0],T in l?(p=l,l=l._vw):p=l.data,d.path=e=a[0][1],a=[d.data=p,e],n=b._gccb(l),e._cpfn){for((r=e).data=a[0],r._cpCtx=n;e.sb&&e.sb._cpfn;)i=e=e.sb;a=[r,e=(i=e.sb||i&&i.path)?i.slice(1):r.path]}else s.tag&&s.path===T&&(a=s);else a=o>1?[a[o-2],a[o-1]]:[a[o-1]];t=a[0],e=a[1]}return(a=a||[t,i])._cxp=d,a}function dt(e,t,n){var i,r,a=e.tagCtx.view,o=e.tagCtxs||[e.tagCtx],l=o.length,p=!t;if(p){if((t=e._.bnd.call(a.tmpl,(e.linkCtx||a).data,a,b)).lt)return;e._.lt=void 0,t=d(t)?t:[t]}if(n)o=e.tagCtxs=t,e.tagCtx=o[0],mt(e);else for(;l--;)i=o[l],r=t[l],y(i.ctx,r.ctx),i.args=r.args,p&&(i.tmpl=r.tmpl),s(i.props).setProperty(r.props);return b._thp(e,o[0]),o}function pt(e){for(var t,n,i,r=[],a=e.length,o=a;o--;)r.push(e[o]);for(o=a;o--;)if((n=r[o]).parentNode){if(i=n._jsvBnd)for(i=i.slice(1).split("&"),n._jsvBnd="",t=i.length;t--;)ct(i[t],n._jsvLkEl,n);ut(Ze(n)+(n._df||""),n)}}function ct(e,n,i){var r,a,o,s,l,p,c,f,v,g,u,_,h,m,b=ke[e];if(n)i._jsvLkEl=void 0;else if(b&&(!i||i===b.elem)){for(r in delete ke[e],b.bnd)(s=b.bnd[r])&&(l=b.cbId,d(s)?t([s]).off(E+l).off(j+l):t(s).off(j+l),delete b.bnd[r]);if(a=b.linkCtx){if(o=a.tag){if(p=o.tagCtxs)for(c=p.length;c--;)(f=(_=p[c]).map)&&f.unmap(),(h=_.linkedElems)&&(m=(m||[]).concat(h));o.onUnbind&&o.onUnbind(o.tagCtx,a,o.ctx),o.onDispose&&o.onDispose(),o._elCnt||(o._prv&&o._prv.parentNode.removeChild(o._prv),o._nxt&&o._nxt.parentNode.removeChild(o._nxt))}for(c=(h=m||[t(a.elem)]).length;c--;)(g=(v=h[c])&&v[0]&&v[0]._jsvTr)&&(at(v,g,"off"),v[0]._jsvTr=void 0);"link"===(u=a.view).type?u.parent.removeViews(u._.key,void 0,!0):delete u._.bnds[e]}delete b.s[b.cbId]}}function ft(e){e?((e=e.jquery?e:t(e)).each((function(){for(var e;(e=D(this,!0))&&e.parent;)e.parent.removeViews(e._.key,void 0,!0);pt(this.getElementsByTagName("*"))})),pt(e)):(B&&(t(B).off(Q,qe).off("blur.jsv","[contenteditable]",qe),B=void 0),_.removeViews(),pt(h.body.getElementsByTagName("*")))}function vt(e,t,n){return n&&n[t]||e.ctx[t]&&e.ctxPrm(t)||p.helpers[t]}function gt(e,t,n,i,r,a){var o,s,l,d,p,c,f,v=0,g=e===t;if(e){for(o=0,s=(l=et(e)||[]).length;o<s;o++){if((c=(d=l[o]).id)===i&&d.ch===r){if(!a)break;s=0}g||(p="_"===d.ch?M[c]:ke[c].linkCtx.tag)&&(d.open?p._prv=t:d.close&&(p._nxt=t)),v+=c.length+2}v&&e.setAttribute(K,e.getAttribute(K).slice(v)),(s=(f=t?t.getAttribute(K):n._df).indexOf("/"+i+r)+1)&&(f=l._tkns.slice(0,v)+f.slice(s+(a?-1:i.length+1))),f&&(t?t.setAttribute(K,f):Ue(n,f))}else Ue(n,Ye(n._df,"#"+i+r)),a||t||Ue(n,Ye(n._df,"/"+i+r))}function ut(e,t){var n,i,r,a;if(a=et(e,!0,Ae))for(n=0,i=a.length;n<i;n++)"_"===(r=a[n]).ch?!(r=M[r.id])||!r.type||t&&r._prv!==t&&r.parentElem!==t||r.parent.removeViews(r._.key,void 0,!0):ct(r.id,void 0,t)}function _t(e,t,n,i,r,a){var o=this,s=[];return o&&o._tgId&&(r=o),arguments.length<4&&(+t!==t?(i=t,n=t=0):+n!==n&&(i=n,n=0)),s[t||0]=e,Be(s,n,i,r,a),o}function ht(){for(var e=this.tag.bindTo.length,t=arguments[e],n=arguments[e+1];e--;)this.tag.setValue(arguments[e],e,this.index,t,n)}function mt(e){var n,i,r,a,o,l,d,p;if(e.contents=function(e,n,i){e!==!!e&&(n=e,e=void 0);var r,a=t(this.nodes());return a[0]&&(r=(n=e?n||"*":n)?a.filter(n):a,a=e?r.add(a.find(n)):r),i?a.filter(i):a},e.nodes=function(e,t,n){var i,r=this.contentView||this,a=r._elCnt,o=!t&&a,s=[];if(!r.args)for(t=t||r._prv,n=n||r._nxt,i=o?t===r._nxt?r.parentElem.lastSibling:t:!1===r.inline?t||r.linkCtx.elem.firstChild:t&&t.nextSibling;i&&(!n||i!==n);)(e||a||i.tagName!==ie)&&s.push(i),i=i.nextSibling;return s},e.childTags=function(e,t){e!==!!e&&(t=e,e=void 0);var n=this.contentView||this,i=n.link?n:n.tagCtx.view,r=n._prv,a=n._elCnt,o=[];return n.args||i.link(void 0,n.parentElem,a?r&&r.previousSibling:r,n._nxt,void 0,{get:{tags:o,deep:e,name:t,id:n.link?n._.id+"_":n._tgId+"^"}}),o},"tag"===e._is){for(i=(d=e).tagCtxs.length;i--;)(r=d.tagCtxs[i]).setValues=ht,r.contents=e.contents,r.childTags=e.childTags,r.nodes=e.nodes;if(a=d.boundProps=d.boundProps||[],o=d.bindFrom)for(n=o.length;n--;)typeof(l=o[n])===A&&(o[l]=1,Le(l,a)<0&&a.push(l));d.setValue=b._gm(d.constructor.prototype.setValue||function(e){return e},(function(e,i,r,a,o){i=i||0,r=r||0;var s,l,p,c,f,v,g=d.tagCtxs[r];if(!g._bdArgs||!o&&void 0===e||g._bdArgs[i]!==e||o&&"set"===o.change&&(a.target===e||o.value===e)?(g._bdArgs=g._bdArgs||[],g._bdArgs[i]=e,void 0!==(v=d.base.call(d,e,i,r,a,o))&&(g._bdVals=g._bdVals||[],g._bdVals[i]=v,e=v)):g._bdVals&&(e=g._bdVals[i]),void 0!==e&&(p=d.linkedCtxParam)&&p[i]&&g.ctxPrm(p[i],e),void 0!==(c=d._.toIndex[i])&&(f=g.linkedElems||d.linkedElem&&[d.linkedElem])&&(s=f[c])&&(n=s.length))for(;n--;)l=s[n],void 0===e||l._jsvChg||d.linkCtx._val===e||(void 0!==l.value?l.type===J?l[G]=t.isArray(e)?t.inArray(l.value,e)>-1:e&&"false"!==e:l.type===Y?l[G]=l.value===e:t(l).val(e):l[l.contentEditable===re||l.contentEditable===ae?"innerHTML":H]=e),g.props.name&&(l.name=l.name||g.props.name);return d})),d.updateValue=_t,d.updateValues=function(){var e,t,n=this.bindTo?this.bindTo.length:1,i=arguments.length-n;return i&&(e=arguments[n],i>1?t=i>1?arguments[n+1]:void 0:+e!==e&&(t=e,e=0)),Be(arguments,e,t,this)},d.setValues=function(){return ht.apply(d.tagCtx,arguments),d},d.refresh=function(){var e,t,n=d.linkCtx,i=d.tagCtx.view;if(t=dt(d))return d.onUnbind&&(d.onUnbind(d.tagCtx,n,d.ctx),d._.unlinked=!0),e=d.inline?I:n.attr||$e(d.parentElem,!0),t=":"===d.tagName?b._cnvt(d.convert,i,d.tagCtx):b._tag(d,i,i.tmpl,t,!0),Ke(n,n.data,n.elem),Fe(t,n,e,d),it(d),d},d.domChange=function(e,n,i,a){var o,s,l,p,c=d,f="jsv-domchange",v=/&(\d+)\+?/g,g=c.parentElem,u=t._data(g).events;for(u&&u[f]&&t(g).triggerHandler(f,arguments);g!==B;){for(;c&&(!c.parentElem||c.parentElem===g);)for(c.onDomChange&&c.onDomChange(r,n,i,a),c=(l=c.tagCtx.view||_).tag;!c&&l.parent&&!l.isTop;)c=(l=l.parent).tag;for(p=g,g=c&&c.parentElem||B;p&&p!==g;){for(;o=v.exec(p._jsvBnd);)(s=ke[o[1]])&&(s=s.linkCtx.tag)&&s.onDomChange&&s.onDomChange(r,n,i,a);p=p.parentElement}}}}else(p=e).addViews=function(e,t,n){var i,r=this,a=t.length,o=r.views;!r._.useKey&&a&&(i=o.length+a,!n&&i!==r.data.length||!1===Re(r,e,r.tmpl,o,t,r.ctx)||r._.srt||r.fixIndex(e+a))},p.removeViews=function(e,n,i,r){function a(e){var n,r,a,o,s,l,d=c[e];if(d&&d.link){for(r in n=d._.id,i||(l=d.nodes()),d.removeViews(void 0,void 0,!0),d.type=void 0,o=d._prv,s=d._nxt,a=d.parentElem,i||(d._elCnt&&gt(o,s,a,n,"_"),t(l).remove()),!d._elCnt&&o&&(o.parentNode.removeChild(o),s.parentNode.removeChild(s)),Me(d),d._.bnds)ct(r);delete M[n]}}var o,s,l,d=this,p=!d._.useKey,c=d.views;if(p&&(l=c.length),void 0===e)if(p){for(o=l;o--;)a(o);d.views=[]}else{for(s in c)a(s);d.views={}}else if(void 0===n&&(p?n=1:(a(e),delete c[e])),p&&n&&(r||l-n===d.data.length)){for(o=e+n;o-- >e;)a(o);c.splice(e,n),d._.srt||d.fixIndex(e)}},p.moveViews=function(e,n,i){function r(e,t){return RegExp("^(.*)("+(t?"\\/":"#")+e._.id+"_.*)$").exec(t||e._prv.getAttribute(K))}function a(e,t){var n,i=e._prv;i.setAttribute(K,t),t.replace(Te,(function(e,t,r,a){(n=ke[a].linkCtx.tag).inline&&(n[t?"_prv":"_nxt"]=i)})),t.replace(Ie,(function(e,t,n,r){M[r][t?"_prv":"_nxt"]=i}))}var o,s,l,d=this,p=d._nxt,c=d.views,f=n<e,v=f?n:e,g=f?e:n,u=n,_=[],h=c.splice(e,i);for(n>c.length&&(n=c.length),c.splice.apply(c,[n,0].concat(h)),l=n+(i=h.length),g+=i;u<l;u++)o=(s=c[u]).nodes(!0),_=d._elCnt?_.concat(o):_.concat(s._prv,o,s._nxt);if(_=t(_),l<c.length?_.insertBefore(c[l]._prv):p?_.insertBefore(p):_.appendTo(d.parentElem),d._elCnt){var m,b=f?v+i:g-i,x=(c[v-1],c[v]),y=c[b],k=c[g],C=r(x),w=r(y);a(x,w[1]+C[2]),k?(m=r(k),a(k,C[1]+m[2])):(c[g-1]._nxt=p,p?(m=r(d,p.getAttribute(K)),p.setAttribute(K,C[1]+m[2])):(m=r(d,d.parentElem._df),Ue(d.parentElem,C[1]+m[2]))),a(y,m[1]+w[2])}d.fixIndex(v)},p.refresh=function(){var e=this,t=e.parent;return t&&(Re(e,e.index,e.tmpl,t.views,e.data,void 0,!0),Me(e)),e},p.fixIndex=function(e){for(var t=this.views,n=t.length;e<n--;)t[n].index!==n&&s(t[n]).setProperty("index",n)},p.link=Xe}function bt(e,t,n,i){for(var r=e.length;r--&&e[r].key!==t;);-1===r?t&&!i&&e.push({key:t,prop:n}):i&&e.splice(r,1)}return o=s.observe,x._clFns=function(){ue={}},mt(b.View.prototype),b.onStore.template=function(e,n,i){null===n?(delete t.link[e],delete t.render[e]):(n.link=ze,e&&!i&&"jsvTmpl"!==e&&(t.render[e]=n,t.link[e]=function(){return ze.apply(n,arguments)}))},b.viewInfos=et,(m.delimiters=function(){var e=ge.apply(0,arguments),t=x.delimiters;return c=t[0].charAt(0),f=t[0].charAt(1),v=t[1].charAt(0),g=t[1].charAt(1),u=t[2],q=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+u+")?(\\"+f+b.rTag+"(:\\w*)?\\"+v+")","g"),e})(),b.addSetting("trigger"),k.merge=function(e){var t,n=this.linkCtx.elem.className,i=this.tagCtx.props.toggle;return i&&(t="(\\s(?="+(t=i.replace(/[\\^$.|?*+()[{]/g,"\\$&"))+"$)|(\\s)|^)("+t+"(\\s|$))",e=(n=n.replace(new RegExp(t),"$2"))+(e?(n&&" ")+i:"")),e},C({on:{attr:te,bindTo:[],init:function(e){for(var n,i=this,r=0,a=e.args,o=a.length;r<o&&!l(a[r]);r++);i._hi=o>r&&r+1,i.inline&&(b.rTmpl.exec(n=t.trim(e.tmpl.markup))||(i.template="<button>"+(n||e.params.args[r]||"noop")+"</button>"),i.attr=I)},onBind:function(){this.template&&(this.mainElem=this.contents("button"))},onAfterLink:function(e,n){var i,r,a,o=this,s=o._hi,l=e.args,d=l.length,p=e.props,c=p.data,g=e.view,u=p.context;s&&(i=l[s-1],r=l.slice(s),l=l.slice(0,s-1),o._sel=l[1],a=o.activeElem=o.activeElem||t(o.inline?(o._sel=l[1]||"*",o.parentElem):n.elem),u||(u=(u=/^(.*)[.^][\w$]+$/.exec(e.params.args.slice(-r.length-1)[0]))&&b.tmplFn(f+":"+u[1]+v,g.tmpl,!0)(n.data,g,b)),o._evs&&o.onUnbind(e,n,o.ctx),a.on(o._evs=l[0]||"click",o._sel,null==c?null:c,o._hlr=function(e){var t,a=!o.inline;if(!a)for(t=o.contents("*"),d=t.length;!a&&d--;)t[d].contains(e.target)&&(a=!0);if(a)return i.apply(u||n.data,[].concat(r,e,{change:e.type,view:g,linkCtx:n},r.slice.call(arguments,1)))}))},onUpdate:!1,onArrayChange:!1,onUnbind:function(){var e=this,t=fe;e.activeElem&&(fe=0,e.activeElem.off(e._evs,e._sel,e._hlr),fe=t)},contentCtx:!0,setSize:!0,dataBoundOnly:!0},radiogroup:{boundProps:["disabled"],init:function(e){this.name=e.props.name||(Math.random()+"jsv").slice(9)},onBind:function(e,n){var i,r,a=this,o=e.args[1],s=e.params.args[0],l=e.params.props,d=l&&l.disabled;for(a.inline?i=a.contents(!0,Z,o):(i=t(Z,n.elem),o&&(i=i.filter(o))),r=i.length;r--;)i[r].name=i[r].name||a.name;for(r in l)s+=" "+r+"="+l[r];i.link(s,n.data,void 0,void 0,n.view),a.linkedElem=i,a.onDomChange=function(){var r,l,p=a.cvtArgs()[0];for(a.linkedElem=i=a.contents(!0,Z,o),l=i.length;l--;)(r=i[l])._jsvLkEl||(r.name=r.name||a.name,r._jsvLkEl=a,r._jsvBnd="&"+a._tgId+"+",r.checked=p===r.value,d&&(r.disabled=!!e.props.disabled),t.link(s,r,n.data,void 0,void 0,n.view))}},onAfterLink:function(e,t,n,i,r){var a=e.params.props;a&&a.disabled&&this.linkedElem.prop("disabled",!!e.props.disabled)},flow:!0,onUpdate:!1,contentCtx:!0,dataBoundOnly:!0},checkboxgroup:{boundProps:["disabled"],init:function(e){this.name=e.props.name||(Math.random()+"jsv").slice(9)},onBind:function(e,n){var i,r,a=this,o=e.args[1],s=e.params.args[0],l=e.params.props,d=l&&l.disabled;for(a.inline?i=a.contents(!0,ee,o):(a.lateRender=!0,i=t(ee,n.elem),o&&(i=i.filter(o))),r=i.length;r--;)i[r].name=i[r].name||a.name,i[r]._jsvLkEl=a;for(r in l)s+=" "+r+"="+l[r];i.link(s,n.data,void 0,void 0,n.view),a.linkedElem=i,a.onDomChange=function(){var i,r=a.contents(!0,ee,o),l=r.length;for(a.linkedElem=r;l--;)i=r[l],d&&(i.disabled=!!e.props.disabled),i._jsvSel||(i.name=i.name||a.name,i._jsvLkEl=a,t.link(s,i,n.data,void 0,void 0,n.view))}},onAfterLink:function(e,t,n,i,r){var a=e.params.props;a&&a.disabled&&this.contents(!0,ee,e.args[1]).prop("disabled",!!e.props.disabled)},flow:!0,onUpdate:!1,contentCtx:!0,dataBoundOnly:!0}}),y(C.for,{sortDataMap:p.map({getTgt:C.for.sortDataMap.getTgt,obsSrc:function(e,t,n){e.update()},obsTgt:function(e,t,n){var i,r=n.items,a=e.src;if("remove"===n.change)for(i=r.length;i--;)s(a).remove(Le(r[i],a));else"insert"===n.change&&s(a).insert(r)}}),mapProps:["filter","sort","reverse","start","end","step"],bindTo:["paged","sorted"],bindFrom:[0],onArrayChange:function(e,t,n,i){var r,a,o=e.target.length,s=this;if(!s.rendering)if(s._.noVws||s.tagCtxs[1]&&("insert"===t.change&&o===t.items.length||"remove"===t.change&&!o))a=n.map&&n.map.propsArr,s.refresh(),a&&(n.map.propsArr=a);else for(r in s._.arrVws)(r=s._.arrVws[r]).data===e.target&&Oe.apply(r,arguments);s.domChange(n,i,t,e),e.done=!0},onUpdate:function(e,t,n){this.setDataMap(n)},onBind:function(e,t,n,i,r){for(var a,s=this,l=0,p=s._ars=s._ars||{},c=s.tagCtxs,f=c.length,v=s.selected||0;l<=v;l++)e=c[l],a=e.map?e.map.tgt:e.args.length?e.args[0]:e.view.data,p[l]&&(o(p[l],!0),delete p[l]),!p[l]&&d(a)&&function(){var n=e;o(a,p[l]=function(e,i){s.onArrayChange(e,i,n,t)})}();for(l=v+1;l<f;l++)p[l]&&(o(p[l],!0),delete p[l]);r&&s.domChange(e,t,r,i)},onAfterLink:function(){for(var e,n,i,r,a=this,o=0,s=a.tagCtxs,l=(s.length,a.selected||0);o<=l;o++)n=(r=s[o]).map,e=r.map?n.tgt:r.args.length?r.args[0]:r.view.data,d(e)&&(i=r.params.props)&&(i.paged&&!a.paged&&(t.observable(a).setProperty("paged",e.slice()),a.updateValue(a.paged,0,o,!0)),i.sorted&&!a.sorted&&(t.observable(a).setProperty("sorted",n&&n.sorted||e.slice()),a.updateValue(a.sorted,1,o,!0)))},onDispose:function(){var e;for(e in this._ars)o(this._ars[e],!0)}}),y(C.if,{onUpdate:function(e,t,n){for(var i,r,a=0;i=this.tagCtxs[a];a++)if(r=i.props.tmpl!==n[a].props.tmpl||i.args.length&&!(i=i.args[0])!=!n[a].args[0],!this.convert&&i||r)return r;return!1},onAfterLink:function(e,t,n,i,r){r&&this.domChange(e,t,r,i)}}),C("props",{baseTag:"for",dataMap:p.map({getTgt:C.props.dataMap.getTgt,obsSrc:function(e,t,n){var i,r,a=e.options.props;if(bt(e.propsArr,n.path,n.value,n.remove),void 0!==a.sort||void 0!==a.start||void 0!==a.end||void 0!==a.step||a.filter||a.reverse)e.update();else if("set"===n.change){for(r=(i=e.tgt).length;r--&&i[r].key!==n.path;);-1===r?n.path&&!n.remove&&s(i).insert({key:n.path,prop:n.value}):n.remove?s(i).remove(r):s(i[r]).setProperty("prop",n.value)}},obsTgt:function(e,t,n){var i,r,a,o,l=e.src,d=n.change;if("set"===d)"prop"===n.path?s(l).setProperty(t.target.key,n.value):(s(l).removeProperty(n.oldValue),s(l).setProperty(n.value,t.target.prop));else if("insert"===d||(o="remove"===d))for(r=(i=n.items).length;r--;)(a=i[r].key)&&(bt(e.propsArr,a,i[r].prop,o),o?(s(l).removeProperty(a),delete l[a]):s(l).setProperty(a,i[r].prop))},tgtFlt:function(e){return Ne.test(e)}}),flow:!0}),y(t,{view:D=function(e,n,i){function r(e,t){if(e)for(o=et(e,t,Ee),l=0,d=o.length;l<d&&(!(a=M[o[l].id])||!(a=a&&i?a.get(!0,i):a));l++);}n!==!!n&&(i=n,n=void 0);var a,o,s,l,d,p,c,f=0,v=h.body;if(e&&e!==v&&_._.useKey>1&&(e=typeof e===A?t(e)[0]:e.jquery?e[0]:e)){if(n){if(r(e._df,!0),!a&&e.tagName)for(p=(c=he?e.querySelectorAll(de):t(de,e).get()).length,s=0;!a&&s<p;s++)r(c[s]);return a}for(;e;){if(o=et(e,void 0,Ie))for(p=o.length;p--;)if((a=o[p]).open){if(f<1)return(a=M[a.id])&&i?a.get(i):a||_;f--}else f++;e=e.previousSibling||e.parentNode}}return _},link:We,unlink:ft,cleanData:function(e){e.length&&fe&&pt(e),ve.apply(t,arguments)}}),y(t.fn,{link:function(e,t,n,i,r,a,o){return We(e,this,t,n,i,r,a,o)},unlink:function(){return ft(this)},view:function(e,t){return D(this[0],e,t)}}),t.each([I,"replaceWith","empty","remove"],(function(e,n){var i=t.fn[n];t.fn[n]=function(){var e;fe++;try{e=i.apply(this,arguments)}finally{fe--}return e}})),y(_=b.topView,{tmpl:{links:{}}}),M={0:_},b._glt=function(e){for(var t,n=/#(\d*)\^\/\1\^/g,i=[],r=Ze(e);t=n.exec(r);)(t=ke[t[1]])&&i.push(t.linkCtx.tag);return i},b._gccb=function(e){return function(t,n){var i,r,a,o,s,d,p,c,f,v,g;if(e&&t){if(t._cpfn)try{return w.cache?e.getCache(t._cpKey):t._cpfn.call(e.tmpl,e.data,e,b)}catch(e){return}if("~"===t.charAt(0)){if("~tag"===t.slice(0,4)&&(r=e.ctx,"."===t.charAt(4)?(i=t.slice(5),r=r.tag):"~tagCtx."===t.slice(0,8)&&(i=t.slice(8),r=r.tagCtx),i))return r?[r,i]:[];if(t=t.slice(1).split("."),o=e.ctxPrm(s=t.shift(),void 0,!0))if(c=o._cxp){if(t.length&&(d="."+t.join("."),(s=o[p=o.length-1])._cpfn?(s.sb=d,s.bnd=!!n):(o[p]=(s+d).replace("#data.",""),"#view"===s.slice(0,5)&&(o[p]=o[p].slice(6),o.splice(p,0,e)))),a=[o],(r=c.tag)&&r.convert)for(p=(g=r.bindTo||[0]).length;p--;)void 0!==n&&p!==c.ind&&(v=g[p],(f=[o[0],r.tagCtx.params[+v===v?"args":"props"]])._cxp=c,a.push(f))}else(t.length||l(o))&&(a=[o,t.join(".")]);return a||[]}if("#"===t.charAt(0))return"#data"===t?[]:[e,t.replace(we,"")]}}},b._cp=function(e,n,i,r){if(i.linked){if(r&&(r.cvt||void 0===r.tag._.toIndex[r.ind]))e=[{_ocp:e}],r.updateValue=function(n){return t.observable(e._cxp.data).setProperty(T,n),this};else if(n){var a=f+":"+n+v,o=ue[a];o||(ue[a]=o=b.tmplFn(a.replace(L,"\\$&"),i.tmpl,!0)),e=o.deps[0]?[i,o]:[{_ocp:r?e:o()}]}else e=[{_ocp:e}];e._cxp=r||{updateValue:function(t){return s(e._cxp.data).setProperty(e._cxp.path,t),this}}}return e},b._ucp=function(e,t,n,i){var r=i.tag,a=r?Le(e,r.linkedCtxParam):0;return i.path||lt("~"+e,n.data,b._gccb(n)),(i.updateValue||r.updateValue)(t,a,i.tagElse,void 0,r)},b._ceo=function e(t){for(var n,i=[],r=t.length;r--;)(n=t[r])._cpfn&&((n=y({},n)).prm=e(n.prm)),i.unshift(n);return i},$=b.advSet,b.advSet=function(){$.call(b),e._jsv=w._jsv?y(e._jsv||{},{views:M,bindings:ke}):void 0,U=w.linkAttr,F=de+",["+U+"]",(O=w._wm).optgroup=O.option,O.tbody=O.tfoot=O.colgroup=O.caption=O.thead,O.th=O.td},m.advanced({linkAttr:"data-link",useViews:!1,noValidate:!1,_wm:{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:t.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},_fe:{input:{from:function(e){return e.type===J?e[G]:e.value},to:ne},textarea:ce,select:ce,optgroup:{to:"label"}}}),t}),window);
